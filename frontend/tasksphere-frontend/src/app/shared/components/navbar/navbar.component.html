<nav class="nav">
  <div class="brand">
    <span class="logo">
      <img src="core-images/tasksphere-logo.png" alt="TaskSphere Logo" />
    </span>
    <span class="name">TaskSphere</span>
  </div>

  <div class="links">
    <div *ngFor="let item of navItems" class="nav-item" [class.has-children]="hasChildren(item)">
      <a
        *ngIf="!hasChildren(item)"
        [routerLink]="item.route.path"
        routerLinkActive="active"
        [routerLinkActiveOptions]="{ exact: true }"
      >
        {{ item.route.title }}
      </a>

      <div *ngIf="hasChildren(item)" class="dropdown-wrapper">
        <button
          class="dropdown-trigger"
          (click)="toggleDropdown(item, $event)"
          [class.active]="item.isOpen"
        >
          {{ item.route.title }}
          <span class="arrow" [class.open]="item.isOpen">â–¾</span>
        </button>
        <div class="dropdown-menu" *ngIf="item.isOpen">
          <a
            *ngFor="let child of item.route.children"
            [routerLink]="getRoute(item.route.path, child.path)"
            (click)="closeDropdown(item)"
            class="dropdown-item"
          >
            {{ child.title || 'Ver todos' }}
          </a>
        </div>
      </div>
    </div>
  </div>
</nav>
